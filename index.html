<!DOCTYPE html>
<html>
<head>
  <title>Leitor QR</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <div id="reader" style="width:300px;"></div>

  <script>
    function enviarCodigo(codigo) {
      fetch("http://192.168.31.67:5000/imprimir", { // <-- IP do seu PC
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ codigo: codigo })
      }).then(response => {
        alert("Enviado para impressÃ£o!");
      }).catch(err => {
        alert("Erro ao enviar: " + err);
      });
    }

    function onScanSuccess(decodedText, decodedResult) {
      html5QrcodeScanner.clear();
      enviarCodigo(decodedText);
    }

    const html5QrcodeScanner = new Html5QrcodeScanner(
      "reader", { fps: 10, qrbox: 250 });
    html5QrcodeScanner.render(onScanSuccess);
  </script>
</body>
</html>
